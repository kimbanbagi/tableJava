<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dc.human.kimbanbagi.tableJava.notification.dao.NotificationDAO">
    <resultMap id="notification" type="dc.human.kimbanbagi.tableJava.notification.vo.NotificationVO">
        <result property="uId" column="user_id" />
        <result property="rId" column="restaurant_id" />
        <result property="rName" column="restaurant_name" />
        <result property="rStatus" column="reservation_status" />
        <result property="rDate" column="reservation_date" />
        <result property="rTime" column="reservation_time" />
        <result property="aCount" column="adult_count" />
        <result property="kCount" column="kids_count" />
        <result property="wNumber" column="waiting_number" />
        <result property="hCount" column="head_count" />
        <result property="comments" column="comments" />
    </resultMap>

    <select id="getUserNotifications" resultMap="notification">
        <![CDATA[
            SELECT
                user_id,
                restaurant_name,
                comments
            FROM notification
            WHERE user_id=#{userId}
            order by created_date desc
        ]]>
    </select>

    <select id="getOwnerNotifications" resultMap="notification">
        <![CDATA[
        SELECT
            restaurant_id,
            restaurant_name,
            comments
        FROM notification
        WHERE restaurant_id=#{restaurantId}
        order by created_date desc
        ]]>
    </select>

    <insert id="addUserNotification" parameterType="dc.human.kimbanbagi.tableJava.notification.vo.NotificationVO">
        <![CDATA[
            INSERT INTO notification (
                                      user_id,
                                      restaurant_name,
                                      comments,
                                      created_id,
                                      created_date
            ) VALUES (
                      #{uId},
                      #{rName},
                      #{comments},
                      #{uId},
                      #{createdDate}
                     )
        ]]>
    </insert>

    <insert id="addOwnerNotification" parameterType="dc.human.kimbanbagi.tableJava.notification.vo.NotificationVO">
        <![CDATA[
        INSERT INTO notification (
            restaurant_id,
            restaurant_name,
            comments,
            created_id,
            created_date
        ) VALUES (
                     #{rId},
                     #{rName},
                     #{comments},
                     #{rId},
                     #{createdDate}
                 )
        ]]>
    </insert>
</mapper>